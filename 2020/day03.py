from functools import reduce
from itertools import starmap

l = [
    '.#....#..##.#..####....#.......',
    '......#..#....#....###......#.#',
    '#..#.....#..............##.#.#.',
    '#.#...#....#...#......##..#..#.',
    '...#..#.##..#..#........###.#.#',
    '...#.#..........#.........##...',
    '...#.#....#.#....#..#......#...',
    '..##.#.....#.......#.###..#..##',
    '..#.......#.......#....##......',
    '....##........##.##...#.###.##.',
    '#.......#.......##..#......#...',
    '..##.............##.#......#...',
    '...#.####....#.....#...##......',
    '.............##.#......#.......',
    '..#...#....#......#....#.......',
    '..#....#..#............#.......',
    '##...#..#........##..#......#..',
    '##........##........#.#.......#',
    '#.......#........#.#..#....###.',
    '.....#..#.#..........##...#....',
    '..##...#......#.#...#..#...#...',
    '##.##...#......#....#....#...#.',
    '#.......#..#.#..#....#..###.#.#',
    '#.............#.#....#..#.#....',
    '...#.......###.#.##.##.#...#..#',
    '.##.......##..##...#..###......',
    '.......#.#.#.#..####..#..#..#..',
    '...##......#.#.##.###....#.###.',
    '###......###......#.#####..#...',
    '..#........##..#..##.##..#...#.',
    '.....##..#...#..#.##.....#.#...',
    '#......#.##....#..##.#....#.#..',
    '##.#.##..#................#....',
    '......#.#....#......##.....#...',
    '..#...##..#..#...#..#.#..#.....',
    '........#.#.#.##...#.#.....#.#.',
    '#.#......#.....##..#...#.......',
    '..#.#......#...........###.....',
    '......##....#....##..#..#.#.#.#',
    '##....#.###...#......#..#...#..',
    '#.#.##....###...####.......#..#',
    '##...........#.....#........#.#',
    '.##.#..#.....#......#.......#..',
    '##..##..###....#.........##....',
    '..#..#..#.##...#.#...#........#',
    '#.##.###...#.......#...........',
    '.........#.................#...',
    '#.##...#.....#..##........#....',
    '....#.#...##...#...........#...',
    '.#.....#.#..#...##..##.....#...',
    '.#.....####....#..##..#........',
    '...#..#......##.#..##.#.#.#..#.',
    '.##.#.....#.....#...#.......##.',
    '......#..#..#......#...####....',
    '.......#......##..#..##.....#..',
    '......#.#..#...#..#.#..........',
    '....##.........#...............',
    '.#....#..##.....#....##.##.....',
    '#.#.....#...#....####....#.#...',
    '#.....#....#.#...#.............',
    '...#..#.....#....##..#..#......',
    '...#.#............#...........#',
    '###.#..#.#......#.....##.....#.',
    '####....#....###.....#..#.#####',
    '.###..#...#.#..#......##.#.#.#.',
    '.....#.##.#....#..##....#..#..#',
    '...#....#...##.....#......#.#..',
    '....#...#....#...#....#.....#.#',
    '.#.....#.....#.#..#......#..#..',
    '..#..##....##.##....#.....##...',
    '#..##...#.##...#..#.#.#.....#..',
    '...#..##.#..#....#.#....######.',
    '..........#..#.....#....#...##.',
    '#.#####.#.###..#.....#.........',
    '#....#......#..#.#.##.##..###..',
    '..#...###.#.#....##.##...##....',
    '.......#....#..#...##......#...',
    '...#.#...#..#.....#..##.#......',
    '###..##...........#............',
    '..#....#.##....#.#..##...#.....',
    '##....#...#....#.....#.#..##...',
    '..............#.##.#..#..##.###',
    '......#..#..#..#.#....###...##.',
    '.#...#..#.#.#....#..........#..',
    '..#.#.....#..#...........#.##..',
    '...#.#......#......#..#..#.#...',
    '...#....#.#.#.....#...#.##..#..',
    '.#.#..#...#........##.......#..',
    '##..........#..#...#....###.#..',
    '#.....###......#..#.#.#....#.#.',
    '..###.......#.#...............#',
    '#....#.....#.#......#..##.##...',
    '#.##.#.#....#..#.#...#.#...#..#',
    '#....#..#...........#.......#..',
    '...#.####.....#.........###.##.',
    '......#..#.....#..........#..#.',
    '#...#.#..####...#...#.#.##...##',
    '.##.........#......#.#.#.......',
    '.......##...##.##....###...##..',
    '...#..#....#..#.#.#.....#.#....',
    '#....#.#.#.......##..###..##...',
    '......#............#.#...#..#..',
    '#.#.....#......#...#.......###.',
    '...#.#................#...#....',
    '.....#......#.#..#...##.#.#...#',
    '#....#.#..#..#..##..#.##..#....',
    '#.................#..#....#....',
    '..#....#.......####....###.....',
    '.#..#.#.#...###..#...#..###....',
    '..#..#.#......#.###..........#.',
    '.....#......#.......##....##.#.',
    '.#....#........#.#.##.#........',
    '#.#..##..#..#.#...####....##...',
    '...#....#.#..#...#..........#..',
    '.#.....#.##....#...##..........',
    '....##....#.....#.....#...#.###',
    '.#...##.#.#..##..#...#.#..#..#.',
    '..#.......#.##.....#.#........#',
    '...#...#.....##..#.#.#....#....',
    '...#.....#.......##.........#.#',
    '.##.....#..#.#...#.#...#.#...#.',
    '...........#...#.###..#...#..#.',
    '#.##........#..###.##...####...',
    '.#.....#.#...##...#..#..#...##.',
    '..#....#..#...#.....#.....##...',
    '..###..#.#.....##........#.##..',
    '.#.#..##........#.##....#..#.##',
    '.####.#..##..#.#..#....##....#.',
    '.##....##...#.#........#.......',
    '....#..#..#...#..#..#..#.#.....',
    '...#......................#....',
    '#.....#.#....#..#..#.#..#....#.',
    '##.....#.....##..........###...',
    '.#..#..............#...##.#.#.#',
    '...#...#.#.............#.#..#.#',
    '..#.....#.......#......#.#.....',
    '.###.#..#..#..#.#..#.....#.....',
    '.....##..##...##.......#....###',
    '.#........###...##..#....##....',
    '#....#.#......##..#....#.##..#.',
    '#....#.#...#........##...###...',
    '.#.....#...#.###....#.##.#.####',
    '###......#....#...#....##..#..#',
    '##....#..###......#...#.#.#....',
    '..........#......##.#..#.......',
    '.#..#......###.........##...#..',
    '....#......#....#.........#.#.#',
    '##.#.#...#.#...#...#..#......#.',
    '....#.##.........#..#.....##.#.',
    '........#...#..#.#.#.#.....##..',
    '..#......#.#.#..#.....##.......',
    '..............#....#....##.#..#',
    '....#.#.....#....#.#.###.#....#',
    '..#..........#..#......#.##..#.',
    '...#...#.#.............#..#....',
    '#.......#..#..##.........##..#.',
    '..##..#............#.....#.....',
    '....#.#..##...#.#..#.........#.',
    '........#.......#.##....#....#.',
    '...#.....#.#.....#.#....#......',
    '..#......##.#.............#.#.#',
    '#.#.............#.#.....#......',
    '.##....##.#.....#....#...##....',
    '.#.#....##....#.....##.........',
    '...#.....#.....#.....#..#.###..',
    '.......#....#...##.#...#...#..#',
    '..#.#.......#...###.#...#....#.',
    '.....###..##....###.#.##.......',
    '....#..................##.#.##.',
    '.#.......###.##...#.#.....#....',
    '....#....##...##.....#.#...#..#',
    '#..#.....#......##...#....#....',
    '#..##.........#.....#...#......',
    '...#..##.......##......#..#####',
    '.#..###.###.#.##........#......',
    '.#...#....#....#.#....#...##...',
    '##........#....#.........##..#.',
    '.#.....##............#.#.......',
    '....#....#...........###.....##',
    '.#......#.#.#..#....#.#.....##.',
    '......#.##.#..##....#.#.#..#...',
    '#....#......#...#..####........',
    '......#..#..##..#.......#.#..#.',
    '##....##.###.#...#.##.#..#.###.',
    '.#.........#...##...#.#......#.',
    '..#.#...........####.#....##.##',
    '.....#.#..##.#...###...#..#.#..',
    '...#..#..##.#...#.....#.##...##',
    '..##......##..........#..###...',
    '.#......##.....#.##....#.#.##.#',
    '...#.......##..##.....#....#...',
    '.##...#...#....#..#............',
    '#..#....#...........#..........',
    '......#...#.#.......#...#.##..#',
    '..#.###..#.....#.....#..#.....#',
    '....#....#..........##....#..#.',
    '.......##.#.#.#......#....#...#',
    '####..#.###........#..#......#.',
    '#........##.#.#.#.............#',
    '.#......#......#..#.##.....#...',
    '.....##.##......##.#.....#.#.#.',
    '.......##.#.....##.......#.#.#.',
    '.#.#..#.#..#.##...#.#....#.#..#',
    '.#..##....#..#...##.......#..#.',
    '.#.#..#.......#................',
    '#........#.#.#......#.#.#.#....',
    '##......#...#..##.#...##.##....',
    '##.#..#...........##...#..###..',
    '......#.####...#........#.#.#..',
    '...#........##..###.#.#...#...#',
    '.#.....##..#......##......###..',
    '..#.#...#......#..#..##.#.....#',
    '#....#..#.#..........#...#.....',
    '.#......#.##..###..#.#....#..##',
    '.......#.......#..#..#......#..',
    '..##.....##.#..#..#.....##.....',
    '........#.##...#.#.#..#..#..#..',
    '...#.######.........#.....#..##',
    '.#.#............#....#.........',
    '#...#....###.#......#.#........',
    '#.........#....#...##..........',
    '....#...........#.###.#...###..',
    '.........#........#.#.#..#...#.',
    '.#.......#.#.....#.#.....#.##..',
    '.....#.......#.....#.#.#.......',
    '#.##..#..##.......#...#......#.',
    '.###.....##...##.#...##.##.#.#.',
    '...#......##..##............#.#',
    '...#......................#..##',
    '#..#..#................#...#...',
    '#..#....#.#.#...##.......#..#..',
    '....#.#..###.##...#..#.###..#..',
    '..#...#....####.#............#.',
    '......#....#.#...#.#.#.........',
    '#...#........#.....##..###.#..#',
    '#....#...#...##...#..#....##...',
    '#..#...#..#.......#.#..##.#..#.',
    '#.#..........#...........##....',
    '.#...###...#......#.......#.#.#',
    '.........#.........#...#...##..',
    '##.#..###......##..#.....#..#..',
    '....##...............#.....#...',
    '.....#.....###.#.....#.#.......',
    '....#..#......###..#..##..#....',
    '......................#.....#..',
    '..#..#...##....##....#........#',
    '..#....#...#...#.......#.....#.',
    '...##.#.#.##......#.#.#.#.####.',
    '.###...#..#......#.#..#........',
    '#..#...##.#..#..##..##....#...#',
    '...#...#..#..#..#........#..##.',
    '.##....#.##.#....#...#.#.#....#',
    '#..#....#..#....#.......##..#.#',
    '...#.#....####...........#...#.',
    '#...#####...#.#..#......#...#.#',
    '.##....#.#.#..#......#..##.....',
    '..........#..#.#.#.....##......',
    '.....#....#..................#.',
    '.........#...#...#....#..###...',
    '.#.#.#....#....................',
    '......##............##.###..#..',
    '#.#...#........####.##..#.#.##.',
    '#........#.#.#.#..#.##.....#...',
    '......####..#.##.......#....#..',
    '.........#...#...#.....#.......',
    '..##.....#...#...#.....##.....#',
    '....#...##....#.....#..#..##.##',
    '..#.........##...##..###..#....',
    '#....#.#.........##.###.#...##.',
    '.##...#....#..#..#.#....##.....',
    '##..#..#..#...........#.##....#',
    '....#..........#...#..#.....#..',
    '........###..#..#.#.#.....##...',
    '#...#...#..###............###..',
    '..#.....#.#.#..#..#.#..#......#',
    '..#...##..#....#...#......#....',
    '#....#........##.....#..##....#',
    '#.....#.#.#..#.......##.#.#.##.',
    '..##...#...#.....#..........#..',
    '##.....#....#......#..........#',
    '......#..#..........#.#..####..',
    '......#...#............##...##.',
    '..#.......##.......#...###.###.',
    '.#..#.#.#...#..##.#......#.#...',
    '.##.....##.#.#...#.##.........#',
    '#.#.######...........#.#####.#.',
    '........#.##...##....##.#.##.#.',
    '....#......#.....#.....###...##',
    '#..............#.#....#.#....#.',
    '....#..###.#.........##.#.#....',
    '..#.#.#..##....####..........#.',
    '...#..#.......#................',
    '...#....#..............#....#..',
    '.....#...#...#....#.#.#..#...#.',
    '......##.............###.##..##',
    '.#...#.#..#......#..#.##.......',
    '##.....#.....#.##...#....#.....',
    '..#..#.#.#.#.#..........#..###.',
    '##..........#........#....#.#..',
    '.....#...#........#.#..###....#',
    '.###.#........#.##......#.#...#',
    '#...##....#....#....##.#.#.....',
    '.....#.#............#..........',
    '..#.##....................#....',
    '.....#..#..#.#..#.##.......#...',
    '.....###......#......##......##',
    '#.....#.#.......##.......#...#.',
    '.#.#...#......#..###...#.....#.',
    '#.#..#...#..##.....#...#.#..#..',
    '.....#.#..........#..#.........',
    '.###..##..##.....#...#...#..##.',
    '#...#.#....#.......##..#.......',
    '###...#.#.#..#.......#......#..',
    '....##........#..........##....',
    '............#....#...........#.',
    '#..#.#....##..#.#..#......##...',
    '.###....##...#....##..........#',
    '.###........#........###.....#.',
    '...#...#.#......#...#....#.....',
    '.###.......#.........#.........',
    '....##.#......#...###......##.#',
    '.###...#..##.....##.......#....',
    '.#.#...#..#.##....#........#...',
]

def count_trees(slope_x, slope_y):
    x = 0
    y = 0
    trees = 0

    line_len = len(l[0])

    while y < len(l):
        trees += (l[y][x] == '#')
        x = (x + slope_x) % line_len
        y += slope_y

    return trees

print(count_trees(3, 1))

print(reduce(int.__mul__, starmap(count_trees, [(1, 1), (3, 1), (5, 1), (7, 1), (1, 2)])))
